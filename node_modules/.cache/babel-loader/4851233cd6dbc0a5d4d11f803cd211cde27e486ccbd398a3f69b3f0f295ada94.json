{"ast":null,"code":"var _jsxFileName = \"D:\\\\GITHUB\\\\ACM\\\\gate-pass-app\\\\client\\\\src\\\\components\\\\BarcodeScanner.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { Html5Qrcode } from \"html5-qrcode\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction BarcodeScanner({\n  onScan,\n  loading\n}) {\n  _s();\n  const [scanning, setScanning] = useState(false);\n  const [error, setError] = useState(\"\");\n  const scannerRef = useRef(null);\n  const containerRef = useRef(null);\n  const startScanner = async () => {\n    setError(\"\");\n    try {\n      const scanner = new Html5Qrcode(\"barcode-reader\");\n      scannerRef.current = scanner;\n      await scanner.start({\n        facingMode: \"environment\"\n      }, {\n        fps: 10,\n        qrbox: {\n          width: 280,\n          height: 150\n        },\n        aspectRatio: 1.5,\n        formatsToSupport: [0,\n        // QR_CODE\n        2,\n        // CODE_128\n        1,\n        // CODE_39\n        4,\n        // EAN_13\n        3,\n        // EAN_8\n        10,\n        // CODE_93\n        7,\n        // ITF\n        11,\n        // CODABAR\n        6,\n        // UPC_A\n        8 // UPC_E\n        ]\n      }, decodedText => {\n        // Barcode detected\n        onScan(decodedText.trim());\n        stopScanner();\n      }, () => {\n        // QR scan failure (ignore, keep scanning)\n      });\n      setScanning(true);\n    } catch (err) {\n      console.error(\"Scanner error:\", err);\n      if (err.toString().includes(\"NotAllowedError\")) {\n        setError(\"Camera permission denied. Please allow camera access.\");\n      } else if (err.toString().includes(\"NotFoundError\")) {\n        setError(\"No camera found on this device.\");\n      } else {\n        setError(\"Failed to start camera. Try refreshing the page.\");\n      }\n    }\n  };\n  const stopScanner = async () => {\n    if (scannerRef.current) {\n      try {\n        await scannerRef.current.stop();\n        scannerRef.current.clear();\n      } catch (e) {\n        // ignore cleanup errors\n      }\n      scannerRef.current = null;\n    }\n    setScanning(false);\n  };\n  useEffect(() => {\n    return () => {\n      // Cleanup on unmount\n      if (scannerRef.current) {\n        scannerRef.current.stop().catch(() => {});\n      }\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"barcode-scanner\",\n    children: [!scanning ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"scanner-start\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"start-scan-btn\",\n        onClick: startScanner,\n        disabled: loading,\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          viewBox: \"0 0 24 24\",\n          width: \"24\",\n          height: \"24\",\n          fill: \"none\",\n          stroke: \"currentColor\",\n          strokeWidth: \"2\",\n          children: [/*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M3 7V5a2 2 0 012-2h2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M17 3h2a2 2 0 012 2v2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M21 17v2a2 2 0 01-2 2h-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M7 21H5a2 2 0 01-2-2v-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n            x1: \"7\",\n            y1: \"12\",\n            x2: \"17\",\n            y2: \"12\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n            x1: \"7\",\n            y1: \"8\",\n            x2: \"13\",\n            y2: \"8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n            x1: \"7\",\n            y1: \"16\",\n            x2: \"15\",\n            y2: \"16\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }, this), \"Open Camera & Scan Barcode\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"scanner-hint\",\n        children: \"Point your camera at the barcode on the participant's ID card\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"scanner-active\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"barcode-reader\",\n        ref: containerRef,\n        className: \"scanner-viewport\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"stop-scan-btn\",\n        onClick: stopScanner,\n        children: \"\\u2715 Close Scanner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"scanner-error\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\u26A0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }, this), \" \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n}\n_s(BarcodeScanner, \"1WnNQcUMBsLvh27zG2BSWm9kEEQ=\");\n_c = BarcodeScanner;\nexport default BarcodeScanner;\nvar _c;\n$RefreshReg$(_c, \"BarcodeScanner\");","map":{"version":3,"names":["React","useEffect","useRef","useState","Html5Qrcode","jsxDEV","_jsxDEV","BarcodeScanner","onScan","loading","_s","scanning","setScanning","error","setError","scannerRef","containerRef","startScanner","scanner","current","start","facingMode","fps","qrbox","width","height","aspectRatio","formatsToSupport","decodedText","trim","stopScanner","err","console","toString","includes","stop","clear","e","catch","className","children","onClick","disabled","viewBox","fill","stroke","strokeWidth","d","fileName","_jsxFileName","lineNumber","columnNumber","x1","y1","x2","y2","id","ref","_c","$RefreshReg$"],"sources":["D:/GITHUB/ACM/gate-pass-app/client/src/components/BarcodeScanner.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport { Html5Qrcode } from \"html5-qrcode\";\r\n\r\nfunction BarcodeScanner({ onScan, loading }) {\r\n  const [scanning, setScanning] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const scannerRef = useRef(null);\r\n  const containerRef = useRef(null);\r\n\r\n  const startScanner = async () => {\r\n    setError(\"\");\r\n    try {\r\n      const scanner = new Html5Qrcode(\"barcode-reader\");\r\n      scannerRef.current = scanner;\r\n\r\n      await scanner.start(\r\n        { facingMode: \"environment\" },\r\n        {\r\n          fps: 10,\r\n          qrbox: { width: 280, height: 150 },\r\n          aspectRatio: 1.5,\r\n          formatsToSupport: [\r\n            0,  // QR_CODE\r\n            2,  // CODE_128\r\n            1,  // CODE_39\r\n            4,  // EAN_13\r\n            3,  // EAN_8\r\n            10, // CODE_93\r\n            7,  // ITF\r\n            11, // CODABAR\r\n            6,  // UPC_A\r\n            8,  // UPC_E\r\n          ],\r\n        },\r\n        (decodedText) => {\r\n          // Barcode detected\r\n          onScan(decodedText.trim());\r\n          stopScanner();\r\n        },\r\n        () => {\r\n          // QR scan failure (ignore, keep scanning)\r\n        }\r\n      );\r\n\r\n      setScanning(true);\r\n    } catch (err) {\r\n      console.error(\"Scanner error:\", err);\r\n      if (err.toString().includes(\"NotAllowedError\")) {\r\n        setError(\"Camera permission denied. Please allow camera access.\");\r\n      } else if (err.toString().includes(\"NotFoundError\")) {\r\n        setError(\"No camera found on this device.\");\r\n      } else {\r\n        setError(\"Failed to start camera. Try refreshing the page.\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const stopScanner = async () => {\r\n    if (scannerRef.current) {\r\n      try {\r\n        await scannerRef.current.stop();\r\n        scannerRef.current.clear();\r\n      } catch (e) {\r\n        // ignore cleanup errors\r\n      }\r\n      scannerRef.current = null;\r\n    }\r\n    setScanning(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      // Cleanup on unmount\r\n      if (scannerRef.current) {\r\n        scannerRef.current.stop().catch(() => {});\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"barcode-scanner\">\r\n      {!scanning ? (\r\n        <div className=\"scanner-start\">\r\n          <button\r\n            className=\"start-scan-btn\"\r\n            onClick={startScanner}\r\n            disabled={loading}\r\n          >\r\n            <svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n              <path d=\"M3 7V5a2 2 0 012-2h2\" />\r\n              <path d=\"M17 3h2a2 2 0 012 2v2\" />\r\n              <path d=\"M21 17v2a2 2 0 01-2 2h-2\" />\r\n              <path d=\"M7 21H5a2 2 0 01-2-2v-2\" />\r\n              <line x1=\"7\" y1=\"12\" x2=\"17\" y2=\"12\" />\r\n              <line x1=\"7\" y1=\"8\" x2=\"13\" y2=\"8\" />\r\n              <line x1=\"7\" y1=\"16\" x2=\"15\" y2=\"16\" />\r\n            </svg>\r\n            Open Camera &amp; Scan Barcode\r\n          </button>\r\n          <p className=\"scanner-hint\">Point your camera at the barcode on the participant's ID card</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"scanner-active\">\r\n          <div id=\"barcode-reader\" ref={containerRef} className=\"scanner-viewport\" />\r\n          <button className=\"stop-scan-btn\" onClick={stopScanner}>\r\n            ✕ Close Scanner\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {error && (\r\n        <div className=\"scanner-error\">\r\n          <span>⚠</span> {error}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BarcodeScanner;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}